{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict'\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst formElement = document.querySelector('.form');\nconst inputElement = document.querySelector('.input-text');\nconst buttonElement = document.querySelector('.search-button');\nconst galleryElement = document.querySelector('.gallery');\nconst loadingContainer = document.querySelector('.loading-container');\n\nconst initialParams = {\n    key: '41688461-d2a05e0fbe969f7f46dd1fb4f',\n    q: '',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n}\n\nfunction searchImage(params) {\n    \n    fetch(`https://pixabay.com/api/?${params}`)\n        .then(response => {\n            if(!response.ok) {\n                throw new Error(response.statusText);\n            };\n\n           return response.json();\n        })\n        .then(({ hits }) => {\n            if(hits.length > 0) {\n           const rendedImages = hits.reduce((html, hit) => {\n            return html + `\n                <li class='gallery-list'>\n                    <a href='${hit.largeImageURL}'>\n                     <img class='img-element' src='${hit.webformatURL}' alt='${hit.tags}'/>\n                     <div class='gallery-text-wrapper'>\n                     <p>Likes: <span class='img-text'>${hit.likes}</span></p>\n                     <p>Views: <span class='img-text'>${hit.views}</span></p>\n                     <p>Comments: <span class='img-text'>${hit.comments}</span></p>\n                     <p>Downloads: <span class='img-text'>${hit.downloads}</span></p>\n                     </div>\n                    </a>\n                </li>`\n            }, \"\")\n\n            galleryElement.insertAdjacentHTML('afterbegin', rendedImages);\n            const simpleBoxContent = new SimpleLightbox ('.gallery a', {\n                captionType: 'attr',\n                captionsData: 'alt',\n                captionDelay: 250, \n                captionPosition: 'bottom',\n                close: true,\n                enableKeyboard: true, \n                docClose: true, \n            })\n\n            simpleBoxContent.refresh()\n        } else {\n            iziToast.error({\n                position: 'topRight',\n                message: `Sorry, there are no images matching your search query. Please try again!`,\n            })\n        }\n        })\n        .catch(error => {\n            iziToast.error({\n                title: 'Error',\n                message: error.message,\n                position: 'topRight',\n            })\n        })\n        .finally(() => {\n            loadingContainer.classList.remove('is-open');\n        })\n        \n}\n\n    formElement.addEventListener('submit', event => {\n        event.preventDefault();\n\n        galleryElement.innerHTML = \"\"; \n\n        if(galleryElement.innerHTML === \"\") {\n            loadingContainer.classList.add('is-open');\n        }\n\n        initialParams.q = inputElement.value.trim();\n        const searchParams = new URLSearchParams(initialParams);\n        searchImage(searchParams);\n    });"],"names":["formElement","inputElement","galleryElement","loadingContainer","initialParams","searchImage","params","response","hits","rendedImages","html","hit","SimpleLightbox","iziToast","error","event","searchParams"],"mappings":"6vBAOA,MAAMA,EAAc,SAAS,cAAc,OAAO,EAC5CC,EAAe,SAAS,cAAc,aAAa,EACnC,SAAS,cAAc,gBAAgB,EAC7D,MAAMC,EAAiB,SAAS,cAAc,UAAU,EAClDC,EAAmB,SAAS,cAAc,oBAAoB,EAE9DC,EAAgB,CAClB,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,EAEA,SAASC,EAAYC,EAAQ,CAEzB,MAAM,4BAA4BA,GAAQ,EACrC,KAAKC,GAAY,CACd,GAAG,CAACA,EAAS,GACT,MAAM,IAAI,MAAMA,EAAS,UAAU,EAGxC,OAAOA,EAAS,MAC3B,CAAS,EACA,KAAK,CAAC,CAAE,KAAAC,KAAW,CAChB,GAAGA,EAAK,OAAS,EAAG,CACrB,MAAMC,EAAeD,EAAK,OAAO,CAACE,EAAMC,IAChCD,EAAO;AAAA;AAAA,+BAEKC,EAAI;AAAA,qDACkBA,EAAI,sBAAsBA,EAAI;AAAA;AAAA,wDAE3BA,EAAI;AAAA,wDACJA,EAAI;AAAA,2DACDA,EAAI;AAAA,4DACHA,EAAI;AAAA;AAAA;AAAA,uBAIjD,EAAE,EAELT,EAAe,mBAAmB,aAAcO,CAAY,EACnC,IAAIG,EAAgB,aAAc,CACvD,YAAa,OACb,aAAc,MACd,aAAc,IACd,gBAAiB,SACjB,MAAO,GACP,eAAgB,GAChB,SAAU,EAC1B,CAAa,EAEgB,QAAS,CACtC,MACYC,EAAS,MAAM,CACX,SAAU,WACV,QAAS,0EACzB,CAAa,CAEb,CAAS,EACA,MAAMC,GAAS,CACZD,EAAS,MAAM,CACX,MAAO,QACP,QAASC,EAAM,QACf,SAAU,UAC1B,CAAa,CACb,CAAS,EACA,QAAQ,IAAM,CACXX,EAAiB,UAAU,OAAO,SAAS,CACvD,CAAS,CAET,CAEIH,EAAY,iBAAiB,SAAUe,GAAS,CAC5CA,EAAM,eAAc,EAEpBb,EAAe,UAAY,GAExBA,EAAe,YAAc,IAC5BC,EAAiB,UAAU,IAAI,SAAS,EAG5CC,EAAc,EAAIH,EAAa,MAAM,KAAI,EACzC,MAAMe,EAAe,IAAI,gBAAgBZ,CAAa,EACtDC,EAAYW,CAAY,CAChC,CAAK"}